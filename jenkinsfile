pipeline{
    agent any
    stages{
        stage("Pre-build"){
            steps{
                echo "Pipeline initiated on ${GIT_BRANCH} branch."
            }
        }
        stage("Development"){
            steps{
            echo "Build Started"
                sh 'docker build -t nannepagajoseph/bookstore_ui .'
            echo "Build Completed"
            }
        }
        stage("Tests"){
            steps{
            echo "Tests Started"
                sh'npm run test'
            echo "Tests Completed"
            }
        }
        stage("Vulnerability Tracer - Trivy"){
            steps{
            echo "Tracer Started"
                sh'C:\\Windows\\System32\\Wsl.exe -- sudo trivy nannepagajoseph/bookstore_ui'
            echo "Tracer Completed"
            }
        }
    }
}